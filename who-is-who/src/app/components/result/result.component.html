<div style="margin: 32px;">
    <h1 style="color:red;"><b>{{ errorMessage }}</b></h1>

    <mat-list>
        <mat-list-item>
            <div *ngIf="hasValue(ImgUrl)"  mat-list-icon [innerHTML]="iconSVG"></div>
            <h1 matLine><b>{{ resourceType }}</b></h1>
        </mat-list-item>    
    </mat-list>

    <mat-divider class="divider-class"></mat-divider>
    
    <mat-card class="user-card">
        <mat-card-header>
        <div *ngIf="!hasValue(ImgUrl)" mat-card-avatar [innerHTML]="iconSVG"></div>
        <div *ngIf="hasValue(ImgUrl)" mat-card-avatar class="user-header-image" [ngStyle]="{ 'background-image': 'url(' + ImgUrl + ')'}"></div>
        <mat-card-title>{{ name }} {{ surname }}</mat-card-title>
        <mat-card-subtitle *ngIf="hasValue(email)" ><b>mail:</b> {{ email }}</mat-card-subtitle>
        <mat-card-subtitle *ngIf="hasValue(department)" ><b>department:</b> {{ department }}</mat-card-subtitle>
        <mat-card-subtitle *ngIf="hasValue(userType)" ><b>user type:</b> {{ userType }}</mat-card-subtitle>
        <mat-card-subtitle *ngIf="hasValue(groupType)" ><b>group type:</b> {{ groupType }}</mat-card-subtitle>
        <mat-card-subtitle>&nbsp;</mat-card-subtitle>
        
        </mat-card-header>
        
        <mat-card-content>
            <b>id</b>: {{rowKey}}<br/>
            <b>last update</b>: {{lastupdate}}
        </mat-card-content>

        <mat-card-actions>
        <button mat-button (click)="goDeeplink(deeplink);">SEE ON AZURE</button>
        <button mat-button (click)="goDeeplink(deeplink);" *ngIf="resourceType == 'User'">SEE ON SERVICE NOW</button>
        </mat-card-actions>
    </mat-card>

    <!-- SUBSCRIPTIONS -->
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Subscription's Users" 
        
        FilterCorelationType="Type eq 'UserInSubscription'" 
        FilterElementType="User"
        FilterElementTypeId="UserId" 
        ></related-azure-elements>
    
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Subscription's Groups" 
        
        FilterCorelationType="Type eq 'GroupInSubscription'" 
        FilterElementType="Group"
        FilterElementTypeId="GroupId" 
        ></related-azure-elements>
    
    <!-- USER -->
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Groups" 
        
        FilterCorelationType="Type eq 'UserInGroup'" 
        FilterElementType="Group"
        FilterElementTypeId="GroupId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure AD Applications" 
        
        FilterCorelationType="Type eq 'UserInApplication'" 
        FilterElementType="Application"
        FilterElementTypeId="ApplicationId" 
        ></related-azure-elements>
    
        <related-azure-elements #subscriptions 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure Subscriptions" 
        
        FilterCorelationType="Type eq 'UserInSubscription'" 
        FilterElementType="Subscription"
        FilterElementTypeId="SubscriptionId" 
        ></related-azure-elements>
    
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure ResourceGroups" 
        
        FilterCorelationType="Type eq 'UserInResourceGroup'" 
        FilterElementType="ResourceGroup"
        FilterElementTypeId="ResourceGroupId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure Resource" 
        
        FilterCorelationType="Type eq 'UserInResource'" 
        FilterElementType="Resource"
        FilterElementTypeId="ResourceId" 
        ></related-azure-elements>
</div>

