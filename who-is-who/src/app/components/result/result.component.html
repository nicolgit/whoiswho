<div style="margin: 32px;">
    <h1 style="color:red;"><b>{{ errorMessage }}</b></h1>

    <h1><b>{{ resourceType }}</b></h1>
    <mat-divider class="divider-class"></mat-divider>
    
    <mat-card class="user-card">
        <mat-card-header>
        <div *ngIf="!hasValue(ImgUrl)" mat-card-avatar [innerHTML]="iconSVG"></div>
        <div *ngIf="hasValue(ImgUrl)" mat-card-avatar class="user-header-image" [ngStyle]="{ 'background-image': 'url(' + ImgUrl + ')'}"></div>
        <mat-card-title>{{ name }} {{ surname }}</mat-card-title>
        <mat-card-subtitle *ngIf="hasValue(email)" ><b>mail:</b> {{ email }}</mat-card-subtitle>
        <mat-card-subtitle *ngIf="hasValue(department)" ><b>department:</b> {{ department }}</mat-card-subtitle>
        <mat-card-subtitle *ngIf="hasValue(userType)" ><b>user type:</b> {{ userType }}</mat-card-subtitle>
        <mat-card-subtitle *ngIf="hasValue(groupType)" ><b>group type:</b> {{ groupType }}</mat-card-subtitle>
        <mat-card-subtitle>&nbsp;</mat-card-subtitle>
        
        </mat-card-header>
        
        <mat-card-content>
            <b>id</b>: {{rowKey}}<br/>
            <b>last update</b>: {{lastupdate}}
        </mat-card-content>

        <mat-card-actions>
        <button mat-button (click)="goDeeplink(deeplink);" style="background-color: azure;">SEE ON AZURE</button>
        <button mat-button (click)="goDeeplink(key);" *ngIf="resourceType == 'User'" style="background-color: lightgoldenrodyellow">SEE ON SERVICE NOW</button>
        </mat-card-actions>
    </mat-card>

    <related-generic-elements 
        Name="Users in Resource" 

        [PartitionKey]="partitionKey"
        [RowKey]="rowKey"
        KeyIs="Child"

        CorelationType = "UserInResource"
        ></related-generic-elements>

    <related-generic-elements 
        Name="Resource managed by User" 

        [PartitionKey]="partitionKey"
        [RowKey]="rowKey"
        KeyIs="Parent"

        CorelationType = "UserInResource"
        ></related-generic-elements>




    <!-- SUBSCRIPTIONS -->
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Subscription's Users" 
        
        FilterCorelationType="Type eq 'UserInSubscription'" 
        FilterElementType="User"
        FilterElementTypeId="UserId" 
        ></related-azure-elements>
    
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Subscription's Groups" 
        
        FilterCorelationType="Type eq 'GroupInSubscription'" 
        FilterElementType="Group"
        FilterElementTypeId="GroupId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Subscription's ResourceGroups" 
        
        FilterCorelationType="Type eq 'ResourceGroupInSubscription'" 
        FilterElementType="ResourceGroup"
        FilterElementTypeId="ResourceGroupId" 
        ></related-azure-elements>

        <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Subscription's Tags" 
        
        FilterCorelationType="Type eq 'TagInSubscription'" 
        FilterElementType="Tag"
        FilterElementTypeId="TagId" 
        ></related-azure-elements>
    
    <!-- ResourceGroup -->
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="ResourceGroup's Subscription" 
        
        FilterCorelationType="Type eq 'ResourceGroupInSubscription'" 
        FilterElementType="Subscription"
        FilterElementTypeId="SubscriptionId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="ResourceGroup's Users" 
        
        FilterCorelationType="Type eq 'UserInResourceGroup'" 
        FilterElementType="User"
        FilterElementTypeId="UserId" 
        ></related-azure-elements>
    
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="ResourceGroup's Groups" 
        
        FilterCorelationType="Type eq 'GroupInResourceGroup'" 
        FilterElementType="Group"
        FilterElementTypeId="GroupId" 
        ></related-azure-elements>
    
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="ResourceGroup's Resources" 
        
        FilterCorelationType="Type eq 'ResourceInResourceGroup'" 
        FilterElementType="Resource"
        FilterElementTypeId="ResourceId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="ResourceGroup's Tags" 
        
        FilterCorelationType="Type eq 'TagInResourceGroup'" 
        FilterElementType="Tag"
        FilterElementTypeId="TagId" 
        ></related-azure-elements>
    
<!-- Resource -->
<related-azure-elements 
    [ParentType]="resourceType"
    [ParentKey]="typeIdColumn"
    [ParentValue]="rowKey"

    Name="ResourceGroup's Resources" 
    
    FilterCorelationType="Type eq 'ResourceInResourceGroup'" 
    FilterElementType="ResourceGroup"
    FilterElementTypeId="ResourceGroupId" 
    ></related-azure-elements>

<related-azure-elements 
    [ParentType]="resourceType"
    [ParentKey]="typeIdColumn"
    [ParentValue]="rowKey"

    Name="Resource's Users" 
    
    FilterCorelationType="Type eq 'UserInResource'" 
    FilterElementType="User"
    FilterElementTypeId="UserId" 
    ></related-azure-elements>

<related-azure-elements 
    [ParentType]="resourceType"
    [ParentKey]="typeIdColumn"
    [ParentValue]="rowKey"

    Name="Resource's Groups" 
    
    FilterCorelationType="Type eq 'GroupInResource'" 
    FilterElementType="Group"
    FilterElementTypeId="GroupId" 
    ></related-azure-elements>


<related-azure-elements 
    [ParentType]="resourceType"
    [ParentKey]="typeIdColumn"
    [ParentValue]="rowKey"

    Name="Resource's Tags" 
    
    FilterCorelationType="Type eq 'TagInResource'" 
    FilterElementType="Tag"
    FilterElementTypeId="TagId" 
    ></related-azure-elements>

    <!-- USER -->
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Groups" 
        
        FilterCorelationType="Type eq 'UserInGroup'" 
        FilterElementType="Group"
        FilterElementTypeId="GroupId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure AD Applications" 
        
        FilterCorelationType="Type eq 'UserInApplication'" 
        FilterElementType="Application"
        FilterElementTypeId="ApplicationId" 
        ></related-azure-elements>
    
        <related-azure-elements #subscriptions 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure Subscriptions" 
        
        FilterCorelationType="Type eq 'UserInSubscription'" 
        FilterElementType="Subscription"
        FilterElementTypeId="SubscriptionId" 
        ></related-azure-elements>
    
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure ResourceGroups" 
        
        FilterCorelationType="Type eq 'UserInResourceGroup'" 
        FilterElementType="ResourceGroup"
        FilterElementTypeId="ResourceGroupId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure Resource" 
        
        FilterCorelationType="Type eq 'UserInResource'" 
        FilterElementType="Resource"
        FilterElementTypeId="ResourceId" 
        ></related-azure-elements>
    
    <!-- Group -->
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Group's users" 
        
        FilterCorelationType="Type eq 'UserInGroup'" 
        FilterElementType="User"
        FilterElementTypeId="UserId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Group's Azure AD Applications"
        
        FilterCorelationType="Type eq 'GroupInApplication'" 
        FilterElementType="Application"
        FilterElementTypeId="ApplicationId" 
        ></related-azure-elements>
    
        <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Group's Azure Subscriptions" 
        
        FilterCorelationType="Type eq 'GroupInSubscription'" 
        FilterElementType="Subscription"
        FilterElementTypeId="SubscriptionId" 
        ></related-azure-elements>
    
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Group's Azure ResourceGroups" 
        
        FilterCorelationType="Type eq 'GroupInResourceGroup'" 
        FilterElementType="ResourceGroup"
        FilterElementTypeId="ResourceGroupId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Group Azure Resource" 
        
        FilterCorelationType="Type eq 'GroupInResource'" 
        FilterElementType="Resource"
        FilterElementTypeId="ResourceId" 
        ></related-azure-elements>
    
    <!-- TAG -->
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure AD Applications" 
        
        FilterCorelationType="Type eq 'TagInApplication'" 
        FilterElementType="Application"
        FilterElementTypeId="ApplicationId" 
        ></related-azure-elements>
    
        <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure Subscriptions" 
        
        FilterCorelationType="Type eq 'TagInSubscription'" 
        FilterElementType="Subscription"
        FilterElementTypeId="SubscriptionId" 
        ></related-azure-elements>
    
    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure ResourceGroups" 
        
        FilterCorelationType="Type eq 'TagInResourceGroup'" 
        FilterElementType="ResourceGroup"
        FilterElementTypeId="ResourceGroupId" 
        ></related-azure-elements>

    <related-azure-elements 
        [ParentType]="resourceType"
        [ParentKey]="typeIdColumn"
        [ParentValue]="rowKey"

        Name="Related Azure Resource" 
        
        FilterCorelationType="Type eq 'TagInResource'" 
        FilterElementType="Resource"
        FilterElementTypeId="ResourceId" 
        ></related-azure-elements>

    <!-- APPLICATION -->
<related-azure-elements 
    [ParentType]="resourceType"
    [ParentKey]="typeIdColumn"
    [ParentValue]="rowKey"

    Name="Application's Users" 
    
    FilterCorelationType="Type eq 'UserInApplication'" 
    FilterElementType="User"
    FilterElementTypeId="UserId" 
    ></related-azure-elements>

<related-azure-elements 
    [ParentType]="resourceType"
    [ParentKey]="typeIdColumn"
    [ParentValue]="rowKey"

    Name="Application's Groups" 
    
    FilterCorelationType="Type eq 'GroupInApplication'" 
    FilterElementType="Group"
    FilterElementTypeId="GroupId" 
    ></related-azure-elements>

<related-azure-elements 
    [ParentType]="resourceType"
    [ParentKey]="typeIdColumn"
    [ParentValue]="rowKey"

    Name="Application's Tags" 
    
    FilterCorelationType="Type eq 'TagInApplication'" 
    FilterElementType="Tag"
    FilterElementTypeId="TagId" 
    ></related-azure-elements>
    </div>

